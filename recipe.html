<html>
	<head>
	<title>Recipe </title>
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
		<link rel="stylesheet" type="text/css" href="style.css">
		<!-- 	 -->
		<!-- CSS only -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

<!-- JS, Popper.js, and jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
	</head>
	<style>
		.card{
			background-color:#212121;
			color: white;
		}
		.img-mod {
		  display: block;
		  margin-left: auto;
		  margin-right: auto;
		  width:75%;
		}
	</style>
	<body>
		<script type="text/javascript">
	var currentid=0;
	var currentlength=0;
	function fetcher(query){
			var ids=[];
			$('#myModalLabel').text(query);
			$.get("https://www.themealdb.com/api/json/v1/1/filter.php?c="+query+"",(data) => {
				$.each(data,(index,el)=>{
					$.each(el,(i,d)=>{

						ids.push(d.idMeal);
					})
					$('.modal-body').empty();
					var counter=0;
					currentlength=ids.length;
					currentid=0;
					$.each(ids,(index,element) => {

						$.get("https://www.themealdb.com/api/json/v1/1/lookup.php?i="+element+"",(data) => {
							
							$.each(data,(ids,dl) => {
								if(counter==0){
									var b='<div class=\"modal-split\" id=\"mid'+counter+'\" style=\"display:block\">';
								}
								else{
									var b='<div class=\"modal-split\" id=\"mid'+counter+'\" style=\"display:none\">';
								}
								var htext='<h1>'+dl[0].strMeal+'</h1>';
								var img='<img class=\"img-mod\" src=\"'+dl[0].strMealThumb+'\"/>';
								var vid='<a href=\"'+dl[0].strYoutube+'\" style=\"margin:8px\" class=\"btn btn-info btn-lg\"><span class=\"glyphicon glyphicon-film\"/>\
								Youtube</a>';
								var co='<p>'+dl[0].strInstructions+'</p></div>';
								$('.modal-body').append(b+htext+img+vid+co);
								counter=counter+1;
								console.log(counter);
							});

							
						});
					});
				})
			});
		}
	$(document).ready(() => {

		$.get("https://www.themealdb.com/api/json/v1/1/categories.php",(data)=>{

			//console.log(data);
			$.each(data,(index,element) => {
				$.each(element,(i,d)=>{
					// style=\"width: 18rem;margin: 10px;\">
					var root='<div class=\"card float-left\" style=\"width: 18rem;margin: 10px;\">';
					var root1='<div class=\"card\"><div class=\"card_image\">';
					var img1='<img src=\"'+d.strCategoryThumb+'\"></div>';
					var content='<div class=\"card_content\"><h4>'+d.strCategory+'</h4><p>'+d.strCategoryDescription+'</p></div>';
					var cb='<div class=\"card_buttons\"><a href=\"#\">view more</a></div></div>';
					// console.log(d);
					var img='<img class=\"card-img-top\" src=\"'+d.strCategoryThumb+'\" alt=\"Card image cap\">';
					var body='<div class=\"card-body\"><h5 class=\"card-title\">'+d.strCategory+'</h5><p class=\"card-text\">'+d.strCategoryDescription+' <a href=\"#\" class=\"btn btn-primary\"  onClick=\"fetcher(\''+d.strCategory+'\')\" data-toggle="modal" data-target="#myModal">view more</a></div>';
					$('.card_group').append(root+img+body);
				})
			});
		});

	});
 function controller(bt){
 	$('#mid'+currentid).css("display","none");
 	if(bt=='prev'){
 		currentid=(currentid-1);
 		if(currentid<0){
 			currentid=currentlength-1;
 		}
 		$('#mid'+currentid).css("display","block");
 	}
 	else
 	{
 		currentid=(currentid+1)%currentlength;
 		$('#mid'+currentid).css("display","block");
 	}
 }
 function erase(){
 	$('#mid'+currentid).css("display","none");

 }

</script>
		<h2>RECIPE's</h2>
		<div id="wrapper">
			<div class="card_group">
				
			</div>
			<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
				<div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
				    
				    <div class="modal-content">
				      <div class="modal-header">
				        <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button> -->
				        <h4 class="modal-title" id="myModalLabel"></h4>
				      
				      </div>
				      
				      <div class="modal-body">
					  

				      </div>

				      <div class="modal-footer">
				 		<button type="button" class="btn btn-default btn-prev" onClick="controller('prev')">Prev</button>
            			<button type="button" class="btn btn-default btn-next" onClick="controller('Next')">Next</button>
            			<button type="button" class="btn btn-default" data-dismiss="modal" onClick="erase()">Close</button>
				      </div>
				    </div>
				</div>
			</div>
		</div>
	</body>
</html>